<%= render EditModalComponent.new do |component| %>
  <% component.header { 'Create Collection' } %>
  <% component.body do %>
    <div data-controller="collection-editor">
      <h4>APO &mdash; <%= @cocina.label %></h4>
      <%= form_tag apo_collections_path(@cocina.externalIdentifier), id: 'collection_form',
                                                                     role: 'form',
                                                                     data: { behavior: 'collection-form' } do %>
        <div class="mb-3" style="padding-left:20px">
          <label class="radio">
            <%= radio_button_tag 'collection_radio', 'create', true, data: { reveal: 'create-collection', action: 'change->collection-editor#toggle' } %>
            Create a Collection from Title/Abstract
          </label>
          <label class="radio">
            <%= radio_button_tag 'collection_radio', 'create', false, data: { reveal: 'create-collection-catkey', action: 'change->collection-editor#toggle' } %>
            Create a Collection from Symphony
          </label>
        </div>
        <div id="create-collection" class="collection_div">
          <div class="mb-3">
            <label for="collection_title">
              Collection Title
            </label>
            <%= text_field_tag 'collection_title', nil, class: 'form-control', data: { action: 'collection-editor#checkTitle' } %>
            <div data-collection-editor-target="titleWarning" class="mt-2 alert alert-warning" hidden>Collection with this title already exists.</div>
          </div>
          <div class="mb-3">
            <label for="collection_abstract">
              Collection Abstract
            </label>
            <%= text_area_tag 'collection_abstract', nil, class: 'form-control' %>
          </div>
          <div class="mb-3">
            <label for="collection_rights">
              Collection Object Visibility
            </label>
            <%= select_tag :collection_rights, options_for_select(Constants::COLLECTION_RIGHTS_OPTIONS, 'world'), class: 'form-select' %>
          </div>
        </div>
        <div id="create-collection-catkey" class="collection_div" style="display:none">
          <div class="mb-3">
            <label for="collection_catkey">
              Collection Catkey
            </label>
            <%= text_field_tag 'collection_catkey', nil, class: 'form-control', data: { action: 'collection-editor#checkCatkey' } %>
            <span data-collection-editor-target="catkeyWarning" class="mt-2 alert alert-warning" hidden>Collection with this catkey already exists.</span>
          </div>
          <div class="mb-3">
            <label for="collection_rights_catkey">
              Collection Object Visibility
            </label>
            <%= select_tag :collection_rights_catkey, options_for_select(Constants::COLLECTION_RIGHTS_OPTIONS, 'world'), class: 'form-select' %>
          </div>
        </div>
        <div class="mb-3">
          <%= button_tag 'register', id: 'register', class: 'btn btn-secondary' do 'Register Collection' end %>
        </div>

        <% if !request.xhr? %>
          <div class="mb-3">
            <%= button_to 'Cancel', solr_document_path(@cocina.externalIdentifier), method: :get, class: 'btn btn-secondary' %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
<% end %>
